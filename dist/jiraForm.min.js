angular.module("templates",[]).run(["$templateCache",function(n){n.put("form.html",'<span ng-show="inquiryController.showFailureMessage">\n  <h2>Something went wrong. If you continue to see this message, please contact us at {{inquiryController.failureContact}}</h2></span>\n<div ng-show="!inquiryController.showFailureMessage" class="well bs-component">\n  <form id="ss-form" name="ssForm" ng-submit="inquiryController.submit()" novalidate="novalidate" class="form-horizontal">\n    <fieldset>\n      <legend>{{inquiryController.config.title}}</legend>\n      <div ng-repeat="input in inquiryController.config.formFields" ng-switch="input.type" class="form-group"><span ng-switch-when="checkbox"><span class="col-sm-4 left-checkbox">\n            <input type="checkbox" ng-true-value="\'Yes\'" ng-false-value="\'No\'" name="{{input.inquiryField}}" ng-model="inquiryController.inquiry[input.inquiryField]" ng-required="input.required"/></span>\n          <label for="{{input.inquiryField}}" class="col-sm-8"></label>{{input.name}}</span><span ng-switch-when="prelabel">\n          <div class="col-sm-4"></div>\n          <div class="col-sm-8">{{input.name}}</div></span><span ng-switch-when="freeformText">\n          <label class="col-sm-4 control-label">{{input.name}}<span ng-if="input.required" class="required">*</span><span ng-if="::!input.hideColon">:</span></label>\n          <div class="col-sm-8">\n            <textarea name="{{input.inquiryField}}" ng-model="inquiryController.inquiry[input.inquiryField]" ng-required="input.required" class="form-control big-text-box"></textarea>\n          </div></span><span ng-switch-default="ng-switch-default">\n          <label for="{{input.inquiryField}}" class="col-sm-4 control-label">{{input.name}}<span ng-if="input.required" class="required">*</span><span ng-if="::!input.hideColon">:</span></label>\n          <div class="col-sm-8"><span ng-switch="input.type"><span ng-switch-when="label"></span><span ng-switch-when="select">\n                <select name="{{input.inquiryField}}" ng-model="inquiryController.inquiry[input.inquiryField]" class="form-control">\n                  <option ng-repeat="value in input.options" value="{{value}}" ng-bind="value"></option>\n                </select></span><span ng-switch-when="text">\n                <input type="{{input.type}}" placeholder="{{input.placeholder}}" name="{{input.inquiryField}}" ng-model="inquiryController.inquiry[input.inquiryField]" ng-required="input.required" maxlength="{{input.maxlength}}" class="form-control"/>\n                <div ng-messages="ssForm[input.inquiryField].$error" role="alert" class="text-warning">\n                  <div ng-message="required" ng-if="ssForm[input.inquiryField].$touched">{{input.name}} is required</div>\n                  <div ng-message="minlength">Email format appears incorrect, please check</div>\n                </div></span><span ng-switch-when="email">\n                <input type="email" name="{{input.inquiryField}}" ng-model="inquiryController.inquiry[input.inquiryField]" ng-required="input.required" maxlength="{{input.maxlength}}" class="form-control"/>\n                <div ng-messages="ssForm[input.inquiryField].$error" role="alert" class="text-warning">\n                  <div ng-message="required" ng-if="ssForm[input.inquiryField].$touched">{{input.name}} is required</div>\n                  <div ng-message="minlength">{{input.name}} is too short</div>\n                  <div ng-message="email">Email format appears incorrect, please check</div>\n                </div></span><span ng-switch-when="number">\n                <input type="number" name="{{input.inquiryField}}" ng-model="inquiryController.inquiry[input.inquiryField]" ng-required="input.required" maxlength="{{input.maxlength}}" class="form-control"/>\n                <div ng-messages="ssForm[input.inquiryField].$error" role="alert" class="text-warning">\n                  <div ng-message="required" ng-if="ssForm[input.inquiryField].$touched">{{input.name}} is required</div>\n                </div></span><span ng-switch-when="tel">\n                <input type="tel" name="{{input.inquiryField}}" ng-model="inquiryController.inquiry[input.inquiryField]" ng-required="input.required" class="form-control"/>\n                <div ng-messages="ssForm[input.inquiryField].$error" role="alert" class="text-warning">\n                  <div ng-message="required" ng-if="ssForm[input.inquiryField].$touched">{{input.name}} is required</div>\n                </div></span><span ng-switch-default="ng-switch-default"><span>{{input.name}} {{input.type}}</span></span></span></div></span></div><span ng-bind="inquiryController.message.success" class="text-success"></span><span ng-show="inquiryController.message.error" ng-bind="inquiryController.message.error + &quot; If you continue to see this error, contact us at &quot; + inquiryController.failureContact" role="alert" class="text-danger"></span>\n      <div class="form-group">\n        <div class="col-sm-8 col-sm-push-4">\n          <input type="hidden" name="draftResponse" value="[]                    "/>\n          <input type="hidden" name="pageHistory" value="0"/><br/>\n          <input id="ss-submit" type="submit" name="submit" value="{{inquiryController.submitting ? &quot;Submitting&quot; : &quot;Submit&quot;}}" ng-disabled="ssForm.$invalid || inquiryController.submitting" class="btn btn-primary"/>\n        </div>\n      </div><span class="col-sm-8 col-sm-offset-4"><span class="required">*</span>Indicates a required field</span>\n    </fieldset>\n  </form>\n</div>')}]),function(n,i,e){"use strict";n.module("jiraForm",["ngMessages","templates","jiraCreate"]).controller("InquiryController",["JIRA","$scope","validateConfig",function(i,e,r){function s(n){t.message.error=void 0!=n.status?0==n.status?"The server couldn't be reached":"Failed to access server with return status: "+n.statusText:n}var t=this;t.config=n.isString(e.config)?window[e.config]:e.config;var o={};return t.inquiry=n.copy(o),n.forEach(t.config.formFields,function(n){t.inquiry[n.inquiryField]=n["default"]}),t.message={},t.failureContact=t.config.errorContact,r(t.config)?(n.forEach(t.config.formFields,function(n){n["default"]&&(t.inquiry[n.inquiryField]=n["default"])}),void(t.submit=function(){t.message.success=void 0,t.message.error=void 0,t.submitting=!0,i.submitRequest(t.inquiry,t.config).then(function(){t.message.success="Request has been submitted successfully",t.inquiry=n.copy(o),e.ssForm.$setPristine(),e.ssForm.$setUntouched()})["catch"](s)["finally"](function(){t.submitting=!1})})):void(t.showFailureMessage=!0)}]).directive("inquiryForm",function(){return{restrict:"E",templateUrl:"form.html",controller:"InquiryController as inquiryController",scope:{config:"="}}}).factory("validateConfig",function(){function i(n){console.warn(n)}return function(e){if(!n.isDefined(e))return i("configuration is undefined"),!1;if(!n.isString(e.proxyUrl))return i("proxyUrl is undefined"),!1;if(!n.isString(e.server))return i("No server provided"),!1;if(!n.isString(e.inquiryDumpField))return i("No field provided to dump input to"),!1;if(!n.isArray(e.formFields)||0==e.formFields.length)return i("No form fields provided"),!1;var r=!0;return n.forEach(e.formFields,function(e,s){e.name&&e.type&&("select"!=e.type||n.isArray(e.options))||(i("Invalid field "+s),r=!1)}),r?e.issueTypes||n.isString(e.issueType)?n.isString(e.issueType)||n.isFunction(e.issueType)?n.isString(e.projectKey)?n.isString(e.summary)||n.isFunction(e.summary)?!0:(i("No summary field string or function defined"),!1):(i("No project key defined"),!1):(i("No issue type function or string defined"),!1):(i("No issue types defined"),!1):!1}});var r=e.querySelectorAll("[ng-app]");0==r.length&&n.element(e).ready(function(){n.forEach(e.getElementsByTagName("inquiry-form"),function(i){n.bootstrap(i,["jiraForm"])})})}(window.angular,window.jiraConfig,window.document);